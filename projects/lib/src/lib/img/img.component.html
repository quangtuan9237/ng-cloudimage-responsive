<ng-container
  *ngIf="disableAnimation; then plainImageTpl; else pictureTpl"
></ng-container>

<ng-template #plainImageTpl>
  <ng-container *ngIf="!isLazyLoadingMode; else lazyLoadPlainImageTpl">
    <img
      #imgElem
      [class]="pictureClassName"
      style="display: block"
      [style]="imageStyles"
      [alt]="pictureAlt"
      [src]="!isSsr ? cloudimgURL : null"
      [srcset]="getcloudimgSRCSET()"
      (load)="!isSsr && onImageLoad($event)"
    />
  </ng-container>
  <ng-template #lazyLoadPlainImageTpl>
    <img
      #imgElem
      [class]="pictureClassName"
      style="display: block"
      [style]="imageStyles"
      [alt]="pictureAlt"
      [lazyLoad]="!isSsr ? getcloudimgSRCSET() : null"
      [useSrcset]="true"
      (load)="!isSsr && onImageLoad($event)"
    />
  </ng-template>
</ng-template>

<ng-template #pictureTpl>
  <div #imgElem [class]="pictureClassName" [style]="pictureStyles">
    <ng-container *ngIf="!isLazyLoadingMode; else lazyLoadPictureTpl">
      <div
        *ngIf="preview && operation !== 'bound'"
        [style]="previewWrapperStyles"
      >
        <img
          [style]="previewImgStyles"
          [src]="previewCloudimgURL"
          (load)="onPreviewLoaded($event)"
          alt="low quality preview"
        />
      </div>
      <img
        [alt]="pictureAlt"
        [style]="imgStyles"
        [src]="!isSsr ? cloudimgURL : null"
        [srcset]="getcloudimgSRCSET()"
        (load)="!isSsr && onImageLoad($event)"
      />
    </ng-container>
  </div>

  <ng-template #lazyLoadPictureTpl>
    <div
      *ngIf="preview && operation !== 'bound'"
      [style]="previewWrapperStyles"
    >
      <img
        [style]="previewImgStyles"
        [lazyLoad]="previewCloudimgURL"
        (load)="onPreviewLoaded($event)"
        alt="low quality preview"
      />
    </div>
    <img
      [alt]="pictureAlt"
      [style]="imgStyles"
      [lazyLoad]="!isSsr ? getcloudimgSRCSET() : null"
      [useSrcset]="true"
      (load)="!isSsr && onImageLoad($event)"
    />
  </ng-template>
</ng-template>
